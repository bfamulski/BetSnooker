<div *ngIf="loading" class="center-container">
  <span class="spinner-border spinner-border-lm" style="display: inline-block; margin: 50px;"></span>
</div>

<div *ngIf="!loading && !error">
  <div style="margin-top: 10px;">
    <table class="table table-responsive" *ngIf="!loading && usersScores">
      <thead class="table-header">
        <tr>
          <th style="text-align: left;">USER</th>
          <th style="text-align: right;">WINNER</th>
          <th style="text-align: right;">EX. SCORE</th>
          <th style="text-align: right;">ACCURACY</th>
          <th style="text-align: right;">SCORE</th>
      </thead>
      <tbody>
        <tr mdbTableCol *ngFor="let user of users">
          <td style="text-align: left; font-weight: bold;">{{user.username}}</td>
          <td style="text-align: right; width: 70px;">0</td>
          <td style="text-align: right; width: 70px;">0</td>
          <td style="text-align: right; width: 70px;">0.0</td>
          <td style="text-align: right; width: 70px; font-weight: bold;">{{usersScores[user.username] ? usersScores[user.username].eventScore : 0.0}}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngFor="let round of eventRounds">
    <div class="title-container" style="padding: 4px;">{{round.roundName}}</div>
    <table class="table table-responsive" *ngIf="!loading">
      <thead class="table-header">
        <tr style="padding: 0px;">
          <th style="text-align: center;">B/0</th>
          <th style="text-align: right;">PLAYER 1</th>
          <th style="text-align: right;"></th> <!--SCORE1-->
          <th style="text-align: center;"></th> <!-- : -->
          <th style="text-align: left;"></th> <!--SCORE2-->
          <th style="text-align: left;">PLAYER 2</th>
          <th style="text-align: left;">WINNER</th>
          <th></th>
          <th *ngFor="let user of users" style="text-align: center;">{{user.username}}</th>
      </thead>

      <tbody>
        <tr mdbTableCol *ngFor="let item of dashboardItems | roundFilter: {round: round.round}">
          <td style="text-align: center; width: 20px;">{{item.roundBestOf}}</td>
          <td style="text-align: right; width: 200px;">{{item.player1Name}}</td>
          <td style="text-align: right; font-weight: bold; width: 20px;">{{item.score1}}</td>
          <td style="text-align: center; width: 20px;">:</td>
          <td style="text-align: left; font-weight: bold; width: 20px;">{{item.score2}}</td>
          <td style="text-align: left; width: 200px;">{{item.player2Name}}</td>
          <td style="text-align: left; width: 200px;">{{item.winnerName}}</td>
          <td></td>
          <td *ngFor="let user of users" style="width: 100px; padding-left: 20px;">
            <table style="margin: -5px;" *ngIf="item.userBets[user.username]">
              <tr>
                <td style="text-align: center; font-weight: bold;">{{item.userBets[user.username]?.betScore1}}</td>
                <td style="text-align: center;">:</td>
                <td style="text-align: center; font-weight: bold; padding-right: 8px;">{{item.userBets[user.username]?.betScore2}}</td>
                <td style="text-align: center; font-weight: bold; width: 35px; min-width: 35px; background-color: green; color: white;">{{item.userBets[user.username]?.scoreValue}}</td>
              </tr>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div *ngIf="error" class="alert alert-danger mt-3 mb-0">{{error}}</div>