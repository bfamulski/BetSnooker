<div *ngIf="loading" class="center-container">
  <span class="spinner-border spinner-border-lm" style="display: inline-block; margin: 50px;"></span>
</div>

<div *ngIf="!loading && !error">
  <div *ngFor="let round of eventRounds">
    <div class="title-container" style="padding: 10px;">{{round.roundName}}</div>
    <table class="table table-sm" *ngIf="!loading">
      <thead>
        <tr style="padding: 0px;">
          <th style="text-align: center;">BEST OF</th>
          <th style="text-align: right;">PLAYER 1</th>
          <th style="text-align: center;"></th>
          <th style="text-align: center; width: fit-content;"></th>
          <th style="text-align: center;"></th>
          <th style="text-align: left;">PLAYER 2</th>
          <th style="text-align: left;">WINNER</th>
          <th *ngFor="let user of users" style="text-align: center;" colspan="5">{{user.username}}</th>
      </thead>

      <tbody>
        <tr mdbTableCol *ngFor="let item of dashboardItems | roundFilter: {round: round.round}">
          <td style="text-align: center; width: 80px;">{{item.roundBestOf}}</td>
          <td style="text-align: right; width: 150px;">{{item.player1Name}}</td>
          <td style="text-align: center; font-weight: bold; width: 20px;">{{item.score1}}</td>
          <td style="text-align: center; width: 20px;">:</td>
          <td style="text-align: center; font-weight: bold; width: 20px;">{{item.score2}}</td>
          <td style="text-align: left; width: 150px;">{{item.player2Name}}</td>
          <td style="text-align: left; width: 150px;">{{item.winnerName}}</td>
  
          <td *ngFor="let user of users"  style="text-align: center; width: fit-content;">
            <table style="text-align: center; background-color: transparent; width: fit-content;" *ngIf="item.userBets[user.username]">
              <tr style="text-align: center;">
                <td style="text-align: center; font-weight: bold;">{{item.userBets[user.username]?.betScore1}}</td>
                <td style="text-align: center; width: fit-content;">:</td>
                <td style="text-align: center; font-weight: bold;">{{item.userBets[user.username]?.betScore2}}</td>
                <td style="text-align: center; width: 5px;"></td>
                <td style="text-align: center; font-weight: bold; width: 35px; background-color: green; color: white;">{{item.userBets[user.username]?.scoreValue}}</td>
              </tr>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div *ngIf="error" class="alert alert-danger mt-3 mb-0">{{error}}</div>